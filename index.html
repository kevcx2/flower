<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="paper-full.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->
<script type="text/paperscript" canvas="myCanvas">

  //settings variables
  var numSegments = 6;
  var rotation = 360/numSegments;
  var centerX = 400;
  var centerY = 400;
  var centerPoint = new Point(centerX, centerY);
  var segLength = 300;

  //triangle work area
  var t1 = centerPoint;
  var t2 = new Point(centerPoint.x, centerPoint.y - segLength);
  t2 = t2.rotate(rotation/2, centerPoint);
  var t3 = new Point(centerPoint.x, centerPoint.y - segLength);
  t3 = t3.rotate(360 - rotation/2, centerPoint);

  var tri = new Path();
  tri.add(t1);
  tri.add(t2);
  tri.add(t3);
  tri.closed = true;
  tri.fillColor = "#D6FFEB"

  var triTop = t2.y;
  var triBottom = t1.y;
  var triWidth = t3.x - t2.x;
  var triHeight = t1.y - t2.y;
  var triCenterX = t2.x + triWidth/2;
  var triCenterY = t2.y + triHeight/2;

  //circle
  var circle = new Path.Circle(new Point(triCenterX, triCenterY - 50), 50);
  circle.fillColor = 'black';

  //line
  var line = new Path();
  line.strokeColor = 'black';
  line.add(centerPoint);
  line.add(new Point(triCenterX, triTop));

  //group
  var groups = [];
  var group = new Group([circle, line]);
  // group.visible = false;

  var drawRotation = function () {
    groups[0] = group;

    //rotate & draw segments
    for(var i = 1; i <= numSegments; i++) {
      var newGroup = groups[i-1].clone();
      newGroup.rotate(rotation, centerPoint);
      groups[i] = newGroup;
    }
  }
  var $trigger = $('button.rotation-trigger');
  $trigger.on('click', drawRotation);

</script>
</head>
<body>
  <div>
    <button class='rotation-trigger' type="button" name="draw">Draw</button>
    <h1> Add Drawing & Rotate </h1>
  </div>
	<canvas id="myCanvas" width=800 height=800 style="border:1px solid black"></canvas>
</body>
</html>
